<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<script>
    var _hmt = _hmt || [];
    (function() {
	      var hm = document.createElement("script");
	      hm.src = "//hm.baidu.com/hm.js?98cc862d4b99529da444b0b16203e7e7";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
    })();
</script>



  
  <title>facert çš„æ‚è´§åº—</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="facert çš„æ‚è´§åº—">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="facert çš„æ‚è´§åº—">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="facert çš„æ‚è´§åº—">
  
    <link rel="alternate" href="/atom.xml" title="facert çš„æ‚è´§åº—" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">facert çš„æ‚è´§åº—</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ç”±æµ…å…¥æ·±å†™ä»£ç†-4-socks5-ä»£ç†-md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/20/ç”±æµ…å…¥æ·±å†™ä»£ç†-4-socks5-ä»£ç†-md/" class="article-date">
  <time datetime="2017-08-20T06:06:55.000Z" itemprop="datePublished">2017-08-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/20/ç”±æµ…å…¥æ·±å†™ä»£ç†-4-socks5-ä»£ç†-md/">ç”±æµ…å…¥æ·±å†™ä»£ç†(4)-socks5-ä»£ç†.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ python å†™ä¸‹ socks5 æœåŠ¡ç«¯çš„å®ç°</p>
<h3 id="0x03-socks5-å®ç°"><a href="#0x03-socks5-å®ç°" class="headerlink" title="0x03 socks5 å®ç°"></a>0x03 socks5 å®ç°</h3><p>å…ˆçœ‹ä¸‹æ•´ä½“ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> logging</div><div class="line"><span class="keyword">import</span> socket</div><div class="line"><span class="keyword">import</span> struct</div><div class="line"><span class="keyword">import</span> select</div><div class="line"><span class="keyword">import</span> threading</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_data</span><span class="params">(sock, data)</span>:</span></div><div class="line">    print(data)</div><div class="line">    bytes_sent = <span class="number">0</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        r = sock.send(data[bytes_sent:])</div><div class="line">        <span class="keyword">if</span> r &lt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> r</div><div class="line">        bytes_sent += r</div><div class="line">        <span class="keyword">if</span> bytes_sent == len(data):</div><div class="line">            <span class="keyword">return</span> bytes_sent</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_tcp</span><span class="params">(sock, remote)</span>:</span></div><div class="line">    <span class="comment"># å¤„ç† client socket å’Œ remote socket çš„æ•°æ®æµ</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        fdset = [sock, remote]</div><div class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">            <span class="comment"># ç”¨ IO å¤šè·¯å¤ç”¨ select ç›‘å¬å¥—æ¥å­—æ˜¯å¦æœ‰æ•°æ®æµ</span></div><div class="line">            r, w, e = select.select(fdset, [], [])</div><div class="line">            <span class="keyword">if</span> sock <span class="keyword">in</span> r:</div><div class="line">                data = sock.recv(<span class="number">4096</span>)</div><div class="line">                <span class="keyword">if</span> len(data) &lt;= <span class="number">0</span>:</div><div class="line">                    <span class="keyword">break</span></div><div class="line">                result = send_data(remote, data)</div><div class="line">                <span class="keyword">if</span> result &lt; len(data):</div><div class="line">                    <span class="keyword">raise</span> Exception(<span class="string">'failed to send all data'</span>)</div><div class="line"></div><div class="line">            <span class="keyword">if</span> remote <span class="keyword">in</span> r:</div><div class="line">                data = remote.recv(<span class="number">4096</span>)</div><div class="line">                <span class="keyword">if</span> len(data) &lt;= <span class="number">0</span>:</div><div class="line">                    <span class="keyword">break</span></div><div class="line">                result = send_data(sock, data)</div><div class="line">                <span class="keyword">if</span> result &lt; len(data):</div><div class="line">                    <span class="keyword">raise</span> Exception(<span class="string">'failed to send all data'</span>)</div><div class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">        <span class="keyword">raise</span>(e)</div><div class="line">    <span class="keyword">finally</span>:</div><div class="line">        sock.close()</div><div class="line">        remote.close()</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_con</span><span class="params">(sock, addr)</span>:</span></div><div class="line">    <span class="comment"># æ¥å—å®¢æˆ·ç«¯æ¥çš„è¯·æ±‚ï¼Œsocks5 çš„ è®¤è¯å’Œè¿æ¥è¿‡ç¨‹</span></div><div class="line"></div><div class="line">    sock.recv(<span class="number">256</span>)</div><div class="line">    <span class="comment"># æ— éœ€è¿›ä¸€æ­¥è®¤è¯ä¿¡æ¯</span></div><div class="line">    sock.send(<span class="string">b"\x05\x00"</span>)</div><div class="line">    data = sock.recv(<span class="number">4</span>) <span class="keyword">or</span> <span class="string">'\x00'</span> * <span class="number">4</span></div><div class="line">    <span class="comment"># CMD ä¸º 0x01 ä¹Ÿå°±æ˜¯ CONNECT ç»§ç»­</span></div><div class="line">    mode = data[<span class="number">1</span>]</div><div class="line">    <span class="keyword">if</span> mode != <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span></div><div class="line">    <span class="comment"># DST.ADDR æœ‰ä¸‰ç§å½¢å¼ï¼Œåˆ†åˆ«åšåˆ¤æ–­</span></div><div class="line">    addr_type = data[<span class="number">3</span>]</div><div class="line">    <span class="keyword">if</span> addr_type == <span class="number">1</span>:</div><div class="line">        addr_ip = sock.recv(<span class="number">4</span>)</div><div class="line">        remote_addr = socket.inet_ntoa(addr_ip)</div><div class="line">    <span class="keyword">elif</span> addr_type == <span class="number">3</span>:</div><div class="line">        addr_len = int.from_bytes(sock.recv(<span class="number">1</span>), byteorder=<span class="string">'big'</span>)</div><div class="line">        remote_addr = sock.recv(addr_len)</div><div class="line">    <span class="keyword">elif</span> addr_type == <span class="number">4</span>:</div><div class="line">        addr_ip = sock.recv(<span class="number">16</span>)</div><div class="line">        remote_addr = socket.inet_ntop(socket.AF_INET6, addr_ip)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span></div><div class="line">    <span class="comment"># DST.PORT</span></div><div class="line">    remote_addr_port = struct.unpack(<span class="string">'&gt;H'</span>, sock.recv(<span class="number">2</span>))</div><div class="line"></div><div class="line">    <span class="comment"># è¿”å›ç»™å®¢æˆ·ç«¯ success</span></div><div class="line">    reply = <span class="string">b"\x05\x00\x00\x01"</span></div><div class="line">    reply += socket.inet_aton(<span class="string">'0.0.0.0'</span>) + struct.pack(<span class="string">"&gt;H"</span>, <span class="number">8888</span>)</div><div class="line">    sock.send(reply)</div><div class="line"></div><div class="line">    <span class="comment"># æ‹¿åˆ° remote address çš„ä¿¡æ¯åï¼Œå»ºç«‹è¿æ¥</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        remote = socket.create_connection((remote_addr, remote_addr_port[<span class="number">0</span>]))</div><div class="line">        logging.info(<span class="string">'connecting %s:%d'</span> % (remote_addr, remote_addr_port[<span class="number">0</span>]))</div><div class="line">    <span class="keyword">except</span> socket.error <span class="keyword">as</span> e:</div><div class="line">        logging.error(e)</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    handle_tcp(sock, remote)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    socketServer = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line">    socketServer.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</div><div class="line"></div><div class="line">    socketServer.bind((<span class="string">''</span>, <span class="number">8888</span>))</div><div class="line">    socketServer.listen(<span class="number">5</span>)</div><div class="line"></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">            sock, addr = socketServer.accept()</div><div class="line">            t = threading.Thread(target=handle_con, args=(sock, addr))</div><div class="line">            t.start()</div><div class="line">    <span class="keyword">except</span> socket.error <span class="keyword">as</span> e:</div><div class="line">        logging.error(e)</div><div class="line">    <span class="keyword">except</span> KeyboardInterrupt:</div><div class="line">        socketServer.close()</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œä¸Šé¢åªæ˜¯ä¸ª socks5 æœåŠ¡å™¨çš„ç®€å•å®ç°ï¼Œå¤„ç† TCP çš„è½¬å‘ï¼Œæ— éœ€å¯†ç è®¤è¯ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†å¼€æ¥çœ‹ï¼Œä¸»è¦æ˜¯ä¸‰ä¸ªéƒ¨åˆ† <code>main()</code>, <code>handle_con()</code>, <code>handle_tcp()</code> </p>
<ul>
<li><code>main()</code> å‡½æ•°å¤§å®¶å…¶å®æŒºç†Ÿæ‚‰çš„ï¼Œå°±æ˜¯å‰é¢æ•™ç¨‹ä»‹ç»çš„ socket ç¼–ç¨‹çš„çº¿ç¨‹æ–¹æ³•ï¼Œç»‘å®šå¥—æ¥å­—ç›‘å¬ï¼Œç„¶åæœ‰å®¢æˆ·ç«¯è¯·æ±‚åï¼Œè°ƒç”¨ <code>handle_con()</code></li>
<li><code>handle_con</code> å®ç°äº† socks5 çš„ è®¤è¯å’Œè¿æ¥è¿‡ç¨‹ï¼Œå¤§å®¶å¯¹ç…§ä¸‹æ³¨é‡Šå’Œå‰é¢çš„ socks5 åè®®ï¼Œåº”è¯¥æŒºå®¹æ˜“çœ‹æ‡‚ã€‚</li>
<li>è®¤è¯å®Œæˆåï¼Œå°±å¼€å§‹è½¬å‘è¯·æ±‚äº†ï¼Œ <code>handle_tcp()</code> å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œè¿™é‡Œé¢ç”¨åˆ°äº† <code>select</code> ï¼ŒIO å¤šè·¯å¤ç”¨æ¨¡å¼ã€‚å…¶å®ä¸€å¼€å§‹æ€•å¤§å®¶ä¸ç†è§£ï¼Œä¹Ÿæƒ³ç”¨çº¿ç¨‹æ¥å®ç°ï¼Œä¸è¿‡å‘ç° IO å¤šè·¯å¤ç”¨åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å°±èƒ½ç›‘å¬å¤šä¸ªå¥—æ¥å­—ï¼Œä»£ç æ¯”å¤šçº¿ç¨‹æ–¹å¼æ›´åŠ ç®€æ´ï¼Œç´¢æ€§å°±è¿™ä¹ˆç”¨äº†ã€‚è¿™é‡Œé¢æ²¡æœ‰æ ¹æ®å¹³å°å»åˆ¤æ–­ç”¨ select, poll è¿˜æ˜¯ epollï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥ç›´æ¥çœ‹ shadowsocks çš„å®ç° <a href="https://github.com/shadowsocks/shadowsocks/blob/master/shadowsocks/eventloop.py" target="_blank" rel="external">eventloop</a></li>
</ul>
<p>ä¸‹ç¯‡æˆ‘ä»¬çœ‹çœ‹ socks5 æœåŠ¡å™¨å¦‚ä½•å’Œ client ç«¯äº¤äº’ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<pre><code>* https://github.com/felix021/ssocks5/blob/master/ssocks5.py
* https://github.com/RicterZ/reprocks/blob/master/server/reprocks_server.py
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/20/ç”±æµ…å…¥æ·±å†™ä»£ç†-4-socks5-ä»£ç†-md/" data-id="cjb0eoram001ipay56kq7dztt" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ç”±æµ…å…¥æ·±å†™ä»£ç†-3-socks5-ä»£ç†" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/19/ç”±æµ…å…¥æ·±å†™ä»£ç†-3-socks5-ä»£ç†/" class="article-date">
  <time datetime="2017-08-19T07:34:32.000Z" itemprop="datePublished">2017-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/19/ç”±æµ…å…¥æ·±å†™ä»£ç†-3-socks5-ä»£ç†/">ç”±æµ…å…¥æ·±å†™ä»£ç†(3) -socks5 ä»£ç†</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ¬æ–‡è®²çš„æ˜¯å¦‚ä½•å†™ä¸€ä¸ª socks5 ä»£ç†ï¼Œå…¶å® shadowsocks çš„ä»£ç†ä¹Ÿæ˜¯ socks5 åè®®çš„ï¼Œæ‰€ä»¥ socks5 ä»£ç†ä¹Ÿæ˜¯æœ¬ç³»åˆ—æ•™ç¨‹çš„ä¸€ä¸ªé‡ç‚¹ã€‚</p>
<p>é¦–å…ˆæ”¾å‡º socks5 åè®®çš„ <a href="https://www.ietf.org/rfc/rfc1928.txt" target="_blank" rel="external">rfc</a>ï¼Œsocks5 åè®®å¾ˆç®€å•ï¼ŒSOCKS5 åè®®å¹¶ä¸è´Ÿè´£ä»£ç†æœåŠ¡å™¨çš„æ•°æ®ä¼ è¾“ç¯èŠ‚ï¼Œæ­¤åè®®åªæ˜¯åœ¨ C/S ä¸¤ç«¯çœŸå®äº¤äº’ä¹‹é—´ï¼Œå»ºç«‹èµ·ä¸€æ¡ä»å®¢æˆ·ç«¯åˆ°ä»£ç†æœåŠ¡å™¨çš„æˆä¿¡è¿æ¥ã€‚</p>
<h3 id="sock5-ä»£ç†ç»“æ„å›¾"><a href="#sock5-ä»£ç†ç»“æ„å›¾" class="headerlink" title="sock5 ä»£ç†ç»“æ„å›¾"></a>sock5 ä»£ç†ç»“æ„å›¾</h3><p><img src="/media/15032089114950.jpg" alt=""></p>
<h3 id="0x02-socks5-åè®®åˆ†æ"><a href="#0x02-socks5-åè®®åˆ†æ" class="headerlink" title="0x02 socks5 åè®®åˆ†æ"></a>0x02 socks5 åè®®åˆ†æ</h3><h5 id="è®¤è¯é˜¶æ®µ"><a href="#è®¤è¯é˜¶æ®µ" class="headerlink" title="è®¤è¯é˜¶æ®µ"></a>è®¤è¯é˜¶æ®µ</h5><p>é¦–å…ˆå®¢æˆ·ç«¯éœ€è¦å’ŒæœåŠ¡ç«¯æœ‰ä¸ªæ¡æ‰‹è®¤è¯çš„è¿‡ç¨‹ï¼Œå¯ä»¥é‡‡ç”¨ <strong>ç”¨æˆ·å/å¯†ç </strong> è®¤è¯æˆ–è€…æ— éœ€è®¤è¯æ–¹å¼ã€‚</p>
<p>æ ¼å¼å¦‚ä¸‹ ï¼ˆ<em>æ•°å­—è¡¨ç¤ºä½æ•°</em>ï¼‰</p>
<pre><code>+----+----------+----------+
|VER | NMETHODS | METHODS  |
+----+----------+----------+
| 1  |    1     |  1~255   |
+----+----------+----------+
</code></pre><ul>
<li>VER å­—æ®µæ˜¯å½“å‰åè®®çš„ç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ˜¯ 5ï¼›</li>
<li>NMETHODS å­—æ®µæ˜¯ METHODS å­—æ®µå ç”¨çš„å­—èŠ‚æ•°ï¼›</li>
<li><p>METHODS å­—æ®µçš„æ¯ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ç§è®¤è¯æ–¹å¼ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯æ”¯æŒçš„å…¨éƒ¨è®¤è¯æ–¹å¼ã€‚</p>
<pre><code>0x00: NO AUTHENTICATION REQUIRED
0x01: GSSAPI
0x02: USERNAME/PASSWORD
0x03: to Xâ€™7Fâ€™ IANA ASSIGNED
0x80: to Xâ€™FEâ€™ RESERVED FOR PRIVATE METHODS
0xFF: NO ACCEPTABLE METHODS
</code></pre></li>
</ul>
<p>æœåŠ¡ç«¯è¿”å›æ ¼å¼</p>
<pre><code>+----+--------+
|VER | METHOD |
+----+--------+
| 1  |   1    |
+----+--------+
</code></pre><p>ä¸€èˆ¬æƒ…å†µä¸‹æœåŠ¡ç«¯è¿”å›ä¸¤ç§æƒ…å†µ</p>
<pre><code>0x05 0x00ï¼šå‘Šè¯‰å®¢æˆ·ç«¯é‡‡ç”¨æ— è®¤è¯çš„æ–¹å¼å»ºç«‹è¿æ¥ï¼›
0x05 0xffï¼šå®¢æˆ·ç«¯çš„ä»»æ„ä¸€ç§è®¤è¯æ–¹å¼æœåŠ¡å™¨éƒ½ä¸æ”¯æŒã€‚
</code></pre><p>ä¸¾ä¸ªä¾‹å­ï¼Œ æœåŠ¡å™¨æ— éœ€è®¤è¯çš„æƒ…å†µå¦‚ä¸‹</p>
<pre><code>client -&gt; server: 0x05 0x01 0x00
server -&gt; client: 0x05 0x00
</code></pre><h5 id="è¿æ¥é˜¶æ®µ"><a href="#è¿æ¥é˜¶æ®µ" class="headerlink" title="è¿æ¥é˜¶æ®µ"></a>è¿æ¥é˜¶æ®µ</h5><p>è®¤è¯å®Œæˆï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼š</p>
<pre><code>+----+-----+-------+------+----------+----------+
|VER | CMD |  RSV  | ATYP | DST.ADDR | DST.PORT |
+----+-----+-------+------+----------+----------+
| 1  |  1  |   1   |  1   | Variable |    2     |
+----+-----+-------+------+----------+----------+
</code></pre><ul>
<li>CMD å­—æ®µ command çš„ç¼©å†™ï¼š<ul>
<li>0x01ï¼šCONNECT å»ºç«‹ TCP è¿æ¥</li>
<li>0x02: BIND ä¸ŠæŠ¥åå‘è¿æ¥åœ°å€</li>
<li>0x03ï¼šå…³è” UDP è¯·æ±‚</li>
</ul>
</li>
<li>RSV å­—æ®µï¼šä¿ç•™å­—æ®µï¼Œå€¼ä¸º 0x00</li>
<li>ATYP å­—æ®µï¼šaddress type çš„ç¼©å†™ï¼Œå–å€¼ä¸ºï¼š<ul>
<li>0x01ï¼šIPv4        </li>
<li>0x03ï¼šåŸŸå</li>
<li>0x04ï¼šIPv6</li>
</ul>
</li>
<li>DST.ADDR å­—æ®µï¼šdestination address çš„ç¼©å†™ï¼Œå–å€¼éš ATYP å˜åŒ–ï¼š<ul>
<li>ATYP == 0x01ï¼š4 ä¸ªå­—èŠ‚çš„ IPv4 åœ°å€</li>
<li>ATYP == 0x03ï¼š1 ä¸ªå­—èŠ‚è¡¨ç¤ºåŸŸåé•¿åº¦ï¼Œç´§éšå…¶åçš„æ˜¯å¯¹åº”çš„åŸŸå</li>
<li>ATYP == 0x04ï¼š16 ä¸ªå­—èŠ‚çš„ IPv6 åœ°å€</li>
<li>DST.PORT å­—æ®µï¼šç›®çš„æœåŠ¡å™¨çš„ç«¯å£</li>
</ul>
</li>
</ul>
<p>æœåŠ¡ç«¯è¿”å›æ ¼å¼</p>
<pre><code>+----+-----+-------+------+----------+----------+
|VER | REP |  RSV  | ATYP | BND.ADDR | BND.PORT |
+----+-----+-------+------+----------+----------+
| 1  |  1  |   1   |  1   | Variable |    2     |
+----+-----+-------+------+----------+----------+
</code></pre><ul>
<li>REP å­—æ®µ<ul>
<li>Xâ€™00â€™ succeeded</li>
<li>Xâ€™01â€™ general SOCKS server failure</li>
<li>Xâ€™02â€™ connection not allowed by ruleset</li>
<li>Xâ€™03â€™ Network unreachable</li>
<li>Xâ€™04â€™ Host unreachable</li>
<li>Xâ€™05â€™ Connection refused</li>
<li>Xâ€™06â€™ TTL expired</li>
<li>Xâ€™07â€™ Command not supported</li>
<li>Xâ€™08â€™ Address type not supported</li>
<li>Xâ€™09â€™ to Xâ€™FFâ€™ unassigned</li>
</ul>
</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå®¢æˆ·ç«¯é€šè¿‡ 127.0.0.1:8000 çš„ä»£ç†å‘é€è¯·æ±‚</p>
<pre><code># request:        VER  CMD  RSV  ATYP DST.ADDR            DST.PORT
client -&gt; server: 0x05 0x01 0x00 0x01 0x7f 0x00 0x00 0x01 0x1f 0x40
# response:       VER  REP  RSV  ATYP BND.ADDR            BND.PORT
server -&gt; client: 0x05 0x00 0x00 0x01 0x00 0x00 0x00 0x00 0x10 0x10
</code></pre><h4 id="ä¼ è¾“é˜¶æ®µ"><a href="#ä¼ è¾“é˜¶æ®µ" class="headerlink" title="ä¼ è¾“é˜¶æ®µ"></a>ä¼ è¾“é˜¶æ®µ</h4><p>æ¥ä¸‹æ¥å°±å¼€å§‹ä¼ è¾“æ•°æ®ï¼Œsocks5 æœåŠ¡å™¨åªåšå•çº¯çš„è½¬å‘åŠŸèƒ½</p>
<p>æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹</p>
<pre><code># è®¤è¯é˜¶æ®µ
client -&gt; server: 0x05 0x01 0x00
server -&gt; client: 0x05 0x00
# è¿æ¥é˜¶æ®µ
client -&gt; server: 0x05 0x01 0x00 0x03 0x0a b&apos;google.com&apos;  0x00 0x50
server -&gt; client: 0x05 0x00 0x00 0x01 0x00 0x00 0x00 0x00 0x10 0x10
# ä¼ è¾“é˜¶æ®µ
client -&gt; server -&gt; remote
remote -&gt; server -&gt; client
...    
</code></pre><p>ä¸‹ç¯‡æ•™ç¨‹ç”¨ä»£ç å®ç°ä¸‹ socks5 ä»£ç†</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<pre><code>* https://loggerhead.me/posts/shadowsocks-yuan-ma-fen-xi-xie-yi-yu-jie-gou.html#fn:bnd.addr
* https://www.ietf.org/rfc/rfc1928.txt
* http://www.moye.me/2017/08/03/analyze-socks5-protocol/
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/19/ç”±æµ…å…¥æ·±å†™ä»£ç†-3-socks5-ä»£ç†/" data-id="cjb0eoraf001epay5xfz4slnq" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ä»£ç†/">ä»£ç†</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ç”±æµ…å…¥æ·±å†™ä»£ç†-2-socket-ç¼–ç¨‹" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/14/ç”±æµ…å…¥æ·±å†™ä»£ç†-2-socket-ç¼–ç¨‹/" class="article-date">
  <time datetime="2017-08-14T15:21:04.000Z" itemprop="datePublished">2017-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/14/ç”±æµ…å…¥æ·±å†™ä»£ç†-2-socket-ç¼–ç¨‹/">ç”±æµ…å…¥æ·±å†™ä»£ç†(2)- socket ç¼–ç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è¯´åˆ°ä»£ç†ï¼Œé‚£è‚¯å®šä¼šè·Ÿç½‘ç»œåè®®æœ‰å…³ï¼ŒåŒ…æ‹¬ï¼ˆtcp, ip, httpï¼‰ï¼Œç½‘ç»œä¸­çš„è¿›ç¨‹éœ€è¦é€šè¿‡ socket æ¥é€šä¿¡ï¼Œsocket å¯ä»¥è®¤ä¸ºæ˜¯æ“ä½œç³»ç»ŸæŠ½è±¡å‡ºæ¥çš„ä¸€ç±»æ¥å£ï¼Œä¾›ä½¿ç”¨è€…èƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿çš„ä¸åº•å±‚çš„ç½‘ç»œåè®®æ‰“äº¤é“ã€‚</p>
<p>0x01<br>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ tcp çš„ socket ç¼–ç¨‹ã€‚</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> socket</div><div class="line"><span class="keyword">import</span> threading</div><div class="line"></div><div class="line"><span class="comment"># AF_INET: åŸºäº IPV4 çš„ç½‘ç»œé€šä¿¡ SOCK_STREAM: åŸºäº TCP çš„æµå¼ socket é€šä¿¡</span></div><div class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line"><span class="comment"># å°†å¥—æ¥å­—ç»‘å®šåˆ°åœ°å€</span></div><div class="line">s.bind((<span class="string">'127.0.0.1'</span>, <span class="number">8888</span>))</div><div class="line"><span class="comment"># ç›‘å¬TCPä¼ å…¥è¿æ¥</span></div><div class="line">s.listen(<span class="number">5</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_tcp</span><span class="params">(sock, addr)</span>:</span></div><div class="line">    print(<span class="string">"new connection from %s:%s"</span> % addr)</div><div class="line">    sock.send(<span class="string">b'Welcome!'</span>)</div><div class="line"></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        data = sock.recv(<span class="number">1024</span>)</div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:</div><div class="line">            <span class="keyword">break</span></div><div class="line">        sock.send(<span class="string">b'Hello, %s!'</span> % data)</div><div class="line">    sock.close()</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    sock, addr = s.accept()</div><div class="line">    t = threading.Thread(target=handle_tcp, args=(sock, addr))</div><div class="line">    t.start()</div></pre></td></tr></table></figure>
<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> socket</div><div class="line"></div><div class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line">s.connect((<span class="string">'127.0.0.1'</span>, <span class="number">8888</span>))</div><div class="line">print(s.recv(<span class="number">1024</span>))</div><div class="line"></div><div class="line"><span class="keyword">for</span> data <span class="keyword">in</span> [<span class="string">b'dog'</span>]:</div><div class="line">    s.send(data)</div><div class="line">    print(s.recv(<span class="number">1024</span>))</div><div class="line">s.close()</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æ˜¯ä¸ªå¾ˆç®€å•çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¾‹å­ï¼ŒæœåŠ¡å™¨ç«¯ç”¨äº†çº¿ç¨‹ï¼Œä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤ŸåŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚ã€‚ä¸ç„¶æ¯æ¬¡å¤„ç†è¯·æ±‚çš„æ—¶å€™æ•´ä¸ªç¨‹åºå°±ä¼šå¤„äºé˜»å¡çŠ¶æ€ã€‚</p>
<p>é€šè¿‡ wireshark æ•è·è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯ç»è¿‡ä¸‰æ¬¡æ¡æ‰‹å’ŒæœåŠ¡ç«¯è¿æ¥æˆåŠŸï¼Œæ¥ä¸‹æ¥åŒæ–¹å¼€å§‹å‘é€æ•°æ®ï¼Œå‘é€å®Œæˆåï¼Œå››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥ã€‚ </p>
<p><img src="/media/15029009030503.jpg" alt=""></p>
<p>å…·ä½“è¯´ä¸‹è¿‡ç¨‹å§</p>
<ol>
<li>é¦–å…ˆæœåŠ¡å™¨ç«¯åˆå§‹åŒ–ä¸€ä¸ª socket å¯¹è±¡ï¼Œå°† socket ç»‘å®šåˆ° (127.0.0.1, 8888) è¿™ä¸ªåœ°å€ä¸Š(bind)ï¼Œç„¶åå¼€å§‹ç›‘å¬(listen)ï¼Œå¹¶é˜»å¡åœ¨ accept å‡½æ•°ä¸Šï¼Œç›´åˆ°æœ‰è¿æ¥è¿‡æ¥ã€‚</li>
<li>å®¢æˆ·ç«¯ä¹Ÿåˆå§‹åŒ–ä¸€ä¸ª socket å¯¹è±¡ï¼Œè°ƒç”¨ connect å’ŒæœåŠ¡ç«¯å»ºç«‹è¿æ¥ã€‚</li>
<li>æœåŠ¡ç«¯ accept å‡½æ•°è¿”å›äº†ä¸€ä¸ªæ–°çš„ sock å¥—æ¥å­—å¯¹è±¡ï¼Œä¼ å…¥åˆ°æ–°çº¿ç¨‹ä¸­å’Œå®¢æˆ·ç«¯äº¤äº’æ•°æ®ã€‚</li>
<li>æ¥ä¸‹æ¥å°±æ˜¯ socket çš„ recv å’Œ send å‡½æ•°è¿›è¡Œæ•°æ®çš„äº¤äº’ã€‚</li>
<li>æœ€å socket close å…³é—­å¥—æ¥å­—ã€‚</li>
</ol>
<p>ç”±äº tcp ä¼ é€’çš„æ•°æ®å±äº stream, ä¹Ÿå°±æ˜¯è°ƒç”¨ recv å’Œ send çš„æ¬¡æ•°éƒ½æ²¡æœ‰é™åˆ¶ï¼Œå¯¹æ•°æ®çš„å‘é€å’Œè¾¹ç•Œä¹Ÿæ²¡æœ‰é™åˆ¶ã€‚è¿™ä¸ªå’Œä¸‹æ–‡çš„ udp ç¼–ç¨‹æœ‰åŒºåˆ«ï¼Œå‘é€ç«¯æ¯æ‰§è¡Œä¸€æ¬¡å†™æ“ä½œï¼Œudp æ¨¡å—å°±ä¼šå°†å®ƒå°è£…æˆä¸€ä¸ª udp åŒ…å‘é€ï¼Œæ¥æ”¶ç«¯ä¹Ÿå¯¹æ¯ä¸ª udp åŒ…æ‰§è¡Œä¸€æ¬¡è¯»æ“ä½œï¼Œæ¯æ¬¡éƒ½å¾—å®Œæ•´å–å‡ºæ¥ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„åº”ç”¨ç¼“å†²åŒºæ¥è¯»å– udp æ•°æ®åŒ…ï¼Œåˆ™ä¼šè¢«æˆªæ–­ã€‚</p>
<p>0x02</p>
<p>å†ç®€å•çœ‹ä¸‹ udp çš„ socket ç¼–ç¨‹</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> socket</div><div class="line"></div><div class="line"><span class="comment"># AF_INET: åŸºäº IPV4 çš„ç½‘ç»œé€šä¿¡ SOCK_DGRAM: åŸºäº udp çš„æµå¼ socket é€šä¿¡</span></div><div class="line">s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div><div class="line"><span class="comment"># å°†å¥—æ¥å­—ç»‘å®šåˆ°åœ°å€</span></div><div class="line">s.bind((<span class="string">'127.0.0.1'</span>, <span class="number">8888</span>))</div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    data, addr = s.recvfrom(<span class="number">1024</span>)</div><div class="line">    print(<span class="string">'Received from %s:%s.'</span> % addr)</div><div class="line">    s.sendto(<span class="string">b'Hello, %s!'</span> % data, addr)</div></pre></td></tr></table></figure>
<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> socket</div><div class="line"></div><div class="line">s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div><div class="line"></div><div class="line"><span class="keyword">for</span> data <span class="keyword">in</span> [<span class="string">b'dog'</span>]:</div><div class="line">    s.sendto(data, (<span class="string">'127.0.0.1'</span>, <span class="number">8888</span>))</div><div class="line">    print(s.recv(<span class="number">1024</span>))</div><div class="line">s.close()</div></pre></td></tr></table></figure>
<p>ç”±äº udp ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œåªéœ€è¦çŸ¥é“å¯¹æ–¹çš„ IP åœ°å€å’Œç«¯å£å·ï¼Œå°±å¯ä»¥ç›´æ¥å‘æ•°æ®åŒ…ã€‚ä½†æ˜¯ï¼Œèƒ½ä¸èƒ½åˆ°è¾¾å°±ä¸çŸ¥é“äº†ã€‚æ‰€ä»¥å®¢æˆ·ç«¯ç›´æ¥é€šè¿‡ sendto() ç»™æœåŠ¡å™¨å‘æ•°æ®ï¼ŒæœåŠ¡ç«¯è°ƒç”¨ recvfrom() å°±èƒ½æ‹¿åˆ°æ•°æ®ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/14/ç”±æµ…å…¥æ·±å†™ä»£ç†-2-socket-ç¼–ç¨‹/" data-id="cjb0eorae001cpay54mzau06h" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ä»£ç†/">ä»£ç†</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ç”±æµ…å…¥æ·±å†™ä»£ç†-1-ä»‹ç»" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/14/ç”±æµ…å…¥æ·±å†™ä»£ç†-1-ä»‹ç»/" class="article-date">
  <time datetime="2017-08-14T15:16:27.000Z" itemprop="datePublished">2017-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/14/ç”±æµ…å…¥æ·±å†™ä»£ç†-1-ä»‹ç»/">ç”±æµ…å…¥æ·±å†™ä»£ç†(1)-ä»‹ç»</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä»£ç†ä½œä¸ºç°ä»£äººä¸Šç½‘å¿…å¤‡çš„ä¸€ä¸ªå·¥å…·ï¼Œä½†æ˜¯å¤§å®¶å…¶å®å¯¹å…¶ä¸­çš„åŸç†ä¹Ÿä¸æ˜¯ç‰¹åˆ«äº†è§£ï¼Œæ‰€ä»¥å†™äº†ä¸€ä¸ªç³»åˆ—çš„æ•™ç¨‹ï¼Œç”±æµ…å…¥æ·±çš„è®²è§£ä¸‹ã€‚</p>
<p>ä»£ç†å¯ä»¥åˆ†ä¸ºæ­£å‘ä»£ç†å’Œåå‘ä»£ç†ã€‚</p>
<ul>
<li>æ­£å‘ä»£ç†æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’Œç›®æ ‡æœåŠ¡å™¨ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ï¼Œç”¨æ¥æŠŠå®¢æˆ·ç«¯çš„è¯·æ±‚ä»£ç†åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œæ¯”å¦‚ç§‘å­¦ä¸Šç½‘ã€‚</li>
<li>åå‘ä»£ç†å°±å¥½åƒæ˜¯ç›®æ ‡æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“è¿™ä¸ªè¯·æ±‚å…·ä½“ä¼šè¢«è½¬å‘åˆ°å“ªé‡Œï¼Œç”±åå‘ä»£ç†è‡ªå·±åˆ¤æ–­ï¼Œæ¯”å¦‚è´Ÿè½½å‡è¡¡ã€‚</li>
</ul>
<p>è¿™æ¬¡ä¸»è¦æ•™ç¨‹è·Ÿæ­£å‘ä»£ç†æœ‰å…³ï¼Œç›®å‰å·²æ›´æ–°å¦‚ä¸‹</p>
<p>ç”±æµ…å…¥æ·±å†™ä»£ç†(2)- socket ç¼–ç¨‹<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(3) -socks5 ä»£ç†<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(4)-socks5-ä»£ç†<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(5)-socks5-ä»£ç†<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(6)-http-ä»£ç†<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(7)-https-ä»£ç†<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(8)-ss-ä»£ç†<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(9)-ssh-ä»£ç†<br>ç”±æµ…å…¥æ·±å†™ä»£ç†(10)-å†…ç½‘ç©¿é€</p>
<p>tips</p>
<ol>
<li>è¿™æ¬¡æ•™ç¨‹çš„æ‰€æœ‰èµ„æºçš„ github åœ°å€ä¸º <a href="https://github.com/facert/socket-example" target="_blank" rel="external">https://github.com/facert/socket-example</a><br>ï¼ˆé™¤äº† ss-local.py å’Œ ss-server.py ä»¥å¤–ï¼Œå…¶ä»–éƒ½ç”¨ python3 ç¼–å†™ï¼‰</li>
<li>å…¬ä¼—å· ç¨‹åºåŒ–æ€ç»´ , æ¬¢è¿å…³æ³¨</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/14/ç”±æµ…å…¥æ·±å†™ä»£ç†-1-ä»‹ç»/" data-id="cjb0eora20016pay5ntannoal" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ä»£ç†/">ä»£ç†</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-å†™ç»™å‰ç«¯çš„ç”©é”…æŒ‡å—" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/08/å†™ç»™å‰ç«¯çš„ç”©é”…æŒ‡å—/" class="article-date">
  <time datetime="2017-03-08T08:04:53.000Z" itemprop="datePublished">2017-03-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/å†™ç»™å‰ç«¯çš„ç”©é”…æŒ‡å—/">å†™ç»™å‰ç«¯çš„ç”©é”…æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">å‰ç«¯å°ç™½ï¼Œâ€œè€ç‹ï¼Œä½ çš„æ¥å£ä¸èƒ½ç”¨äº†â€</div><div class="line">åç«¯è€ç‹ä¸€è„¸ä¸å±‘ï¼Œâ€œæ€ä¹ˆå¯èƒ½ï¼Œåˆšåˆšè¿˜èƒ½ç”¨ï¼Œä½ çœ‹çœ‹å‚æ•°ä¼ å¯¹äº†æ²¡æœ‰ã€‚â€ </div><div class="line">å‰ç«¯å°ç™½å­å“§å­å“§æ£€æŸ¥äº†å‡ éï¼Œâ€œå‚æ•°æ²¡é—®é¢˜å•Šï¼Œä½ çœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰ username, idã€‚ã€‚ã€‚â€</div><div class="line">åç«¯è€ç‹é¡¿äº†è®¸ä¹…ï¼Œ â€œå‚æ•°åº”è¯¥æ²¡é—®é¢˜ï¼Œä½ å†æ¸…ä¸‹æµè§ˆå™¨ç¼“å­˜è¯•è¯•â€</div><div class="line">å‰ç«¯å°ç™½æ‘ç€ &quot;ctr + f5&quot; åˆ·æ–°äº†å¥½å¤šæ¬¡ï¼Œ ä¸€è„¸è‹¦é€¼çš„è¯´ï¼šâ€œæ¸…å®Œæµè§ˆå™¨ç¼“å­˜äº†ï¼Œè¿˜æ˜¯æœ‰é—®é¢˜â€</div><div class="line">åç«¯è€ç‹ç•¥è¿‡ä¸€ä¸ç–‘è™‘ï¼Œéš¾é“æ˜¯æˆ‘æ¥å£å‡ºé—®é¢˜äº†ï¼Œä¸è¯¥å•Šï¼Œåˆšè¿˜èƒ½ç”¨ï¼Œéƒ½æµ‹è¯•å¥½å‡ éäº†ï¼Œè¯´é“ï¼šâ€œä½ çœ‹çœ‹æ˜¯ä¸æ˜¯æ•°æ®åº“å­˜çš„æµ‹è¯•æ•°æ®æœ‰é—®é¢˜ï¼Œåˆ äº†å†è¯•è¯•ï¼Œæˆ–è€…æ¢ä¸ªæµè§ˆå™¨ï¼Œé‡å¯ä¸‹ serverã€‚â€</div><div class="line">å‰ç«¯å°ç™½ç…§ç€è€ç‹çš„æ–¹æ³•é€ä¸€å°è¯•ç€ã€‚ã€‚ã€‚</div><div class="line">çªç„¶è€ç‹æ‹äº†ä¸‹è„‘ç“œï¼Œä¸€è„¸å°´å°¬çš„è¯´ï¼šâ€œå°ç™½ï¼Œæˆ‘åˆš fix ä¸€ä¸ªçº¿ä¸Š bug, æµ‹è¯•ç¯å¢ƒæ¢äº†åˆ†æ”¯ï¼Œæ‰€ä»¥æ¥å£å‡ºé—®é¢˜äº†ã€‚â€</div><div class="line">å°ç™½ä¸€è„¸ç”Ÿæ— å¯æ‹çš„æœ›ç€è€ç‹å¤´é¡¶çš„åœ°ä¸­æµ·å‘å‘†ã€‚ã€‚ã€‚</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æƒ…èŠ‚çº¯å±è™šæ„ï¼Œä½œä¸ºä¸€ä¸ªåç«¯å¼€å‘äººå‘˜ï¼Œæˆ‘æ€ä¹ˆå¿å¿ƒè¿™ä¹ˆé»‘è‡ªå·±çš„åŒè¡Œå‘¢ ğŸ˜­ã€‚ä¸è¿‡æ€è€ƒä¸‹è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œå‰ç«¯å¦‚ä½•èƒ½å¤Ÿå¿«é€Ÿçš„å®šä½é—®é¢˜å‘¢ã€‚è¿™é‡Œé¢è·Ÿå¾ˆå¤šå› ç´ æœ‰å…³ï¼Œæ¯”å¦‚å‰åç«¯åä½œæµç¨‹æ˜¯å¦å®Œå–„ï¼Œå‰åç«¯äººå‘˜çš„ç»éªŒã€‚<br>
        
          <p class="article-more-link">
            <a href="/2017/03/08/å†™ç»™å‰ç«¯çš„ç”©é”…æŒ‡å—/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/08/å†™ç»™å‰ç«¯çš„ç”©é”…æŒ‡å—/" data-id="cjb0eor9g000npay5bic9c4mc" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webå¼€å‘/">webå¼€å‘</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; zurÃ¼ck</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DIY/">DIY</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/djangoæºç /">djangoæºç </a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ghost/">ghost</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-å…¥é—¨/">python å…¥é—¨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-django/">web, django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webå¼€å‘/">webå¼€å‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ä»£ç†/">ä»£ç†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ä»¥å¤ªåŠï¼ŒåŒºå—é“¾/">ä»¥å¤ªåŠï¼ŒåŒºå—é“¾</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ€è€ƒ/">æ€è€ƒ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°æ®ç»“æ„/">æ•°æ®ç»“æ„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¡ç®—æœºç³»ç»Ÿ/">è®¡ç®—æœºç³»ç»Ÿ</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/DIY/" style="font-size: 10px;">DIY</a> <a href="/tags/algorithm/" style="font-size: 16.67px;">algorithm</a> <a href="/tags/djangoæºç /" style="font-size: 10px;">djangoæºç </a> <a href="/tags/ghost/" style="font-size: 10px;">ghost</a> <a href="/tags/python-å…¥é—¨/" style="font-size: 20px;">python å…¥é—¨</a> <a href="/tags/web/" style="font-size: 16.67px;">web</a> <a href="/tags/web-django/" style="font-size: 10px;">web, django</a> <a href="/tags/webå¼€å‘/" style="font-size: 10px;">webå¼€å‘</a> <a href="/tags/ä»£ç†/" style="font-size: 16.67px;">ä»£ç†</a> <a href="/tags/ä»¥å¤ªåŠï¼ŒåŒºå—é“¾/" style="font-size: 10px;">ä»¥å¤ªåŠï¼ŒåŒºå—é“¾</a> <a href="/tags/æ€è€ƒ/" style="font-size: 10px;">æ€è€ƒ</a> <a href="/tags/æ•°æ®ç»“æ„/" style="font-size: 13.33px;">æ•°æ®ç»“æ„</a> <a href="/tags/è®¡ç®—æœºç³»ç»Ÿ/" style="font-size: 10px;">è®¡ç®—æœºç³»ç»Ÿ</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/12/10/ä»¥å¤ªåŠäº‘æ’¸çŒ«æ•™ç¨‹/">ä»¥å¤ªåŠäº‘æ’¸çŒ«æ•™ç¨‹</a>
          </li>
        
          <li>
            <a href="/2017/12/03/xpath-ä½¿ç”¨æ•™ç¨‹/">xpath ä½¿ç”¨æ•™ç¨‹</a>
          </li>
        
          <li>
            <a href="/2017/12/03/åŠ¨æ€å¯é…ç½®åŒ– Python çˆ¬è™«æ•™ç¨‹/">åŠ¨æ€å¯é…ç½®åŒ– Python çˆ¬è™«æ•™ç¨‹</a>
          </li>
        
          <li>
            <a href="/2017/10/11/è°ˆè°ˆ-django-åº”ç”¨å®è·µ/">è°ˆè°ˆ django åº”ç”¨å®è·µ</a>
          </li>
        
          <li>
            <a href="/2017/08/26/ç”±æµ…å…¥æ·±å†™ä»£ç†-10-åå‘ä»£ç†/">ç”±æµ…å…¥æ·±å†™ä»£ç†(10)-å†…ç½‘ç©¿é€</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 facert<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    }); 
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>




  </div>
</body>
</html>